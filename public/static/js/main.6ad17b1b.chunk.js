(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{162:function(e,t,n){},167:function(e,t,n){},287:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(30),s=n.n(c),i=(n(162),n(8)),o=(n(163),n(164),n(165),n(166),n(167),n(15)),l=n(37),u=n(17),j=n.n(u),d=n(20),b=n(344),m=n(354),p=n(1),h=function(e){return Object(p.jsx)("div",{children:Object(p.jsx)(m.a,{elevation:2,children:Object(p.jsx)("p",{style:{fontSize:"1.25rem",padding:"2rem"},children:e.text})})})},O=n(133),x=n(339),f=n(355),g=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(i.a)(c,2),o=s[0],l=s[1],u=Object(r.useRef)([]),b=Object(r.useCallback)(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r,c,s,i,o,d=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"GET",r=d.length>2&&void 0!==d[2]?d[2]:null,c=d.length>3&&void 0!==d[3]?d[3]:{},a(!0),s=new AbortController,u.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:r,headers:c,signal:s.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(o=e.sent,i.ok){e.next=16;break}throw console.log(i),new Error(o.message);case 16:return a(!1),e.abrupt("return",o);case 20:throw e.prev=20,e.t0=e.catch(6),l(e.t0.message),e.t0;case 24:a(!1);case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){u.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:o,sendRequest:b,clearError:function(){l(null)}}},v=Object(r.createContext)({userName:null,fullName:null,userId:null,userType:null,isLoggedIn:!1,token:null,login:function(){},logout:function(){}}),y=n(42),w=n(132),C=n.n(w),S=function(e){var t=Object(r.useContext)(v),n=g(),a=(n.isLoading,n.error,n.sendRequest),c=(n.clearError,function(){var t=Object(d.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a("".concat(y.ServerURL,"api/posts/").concat(e.postID,"/comments/").concat(e.id),"DELETE");case 2:n=t.sent,e.refreshComments(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return Object(p.jsxs)("div",{style:{justifyItems:"center"},children:[Object(p.jsxs)("p",{style:{display:"inline-block"},children:[Object(p.jsxs)("strong",{children:[e.creator,": "]}),e.comment]}),Object(p.jsx)("p",{style:{display:"inline-block",float:"right"},children:e.createdAt}),("admin"===t.userType||t.fullName===e.creator)&&Object(p.jsx)(C.a,{onClick:c,style:{display:"inline-block",float:"right"}})]},e.id)},k=function(e){return Object(p.jsx)("div",{children:e.comments.map((function(t){return Object(p.jsx)(S,{refreshComments:e.refreshComments,postID:e.postID,id:t.id,comment:t.comment,creator:t.creator,creatorID:t.creatorID},t.id)}))})},T=function(e){var t=g(),n=(t.isLoading,t.error,t.sendRequest),a=(t.clearError,Object(r.useState)([])),c=Object(i.a)(a,2),s=c[0],o=c[1],l=Object(r.useState)(""),u=Object(i.a)(l,2),b=u[0],h=u[1],O=Object(r.useState)(!1),w=Object(i.a)(O,2),C=w[0],S=w[1],T=Object(r.useContext)(v);Object(r.useEffect)((function(){var t=function(){var t=Object(d.a)(j.a.mark((function t(){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("".concat(y.ServerURL,"api/posts/").concat(e.id,"/comments"),"GET");case 2:r=t.sent,o(r);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[s.length,e.id]);var I=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var t=Object(d.a)(j.a.mark((function t(r){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(13!==r.keyCode){t.next=6;break}return t.next=3,n("".concat(y.ServerURL,"api/posts/").concat(e.id,"/comments/add"),"POST",JSON.stringify({comment:b,creator:T.fullName,creatorID:T.userId}),{"Content-Type":"application/json"});case 3:a=t.sent,h(""),o(a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsx)("div",{style:{marginBottom:"2rem"},children:Object(p.jsxs)(m.a,{style:{padding:"2rem",paddingBottom:"1rem"},elevation:2,children:[Object(p.jsxs)("div",{style:{paddingBottom:"1rem"},children:[Object(p.jsx)("div",{style:{display:"inline-block",fontSize:"1.5rem",fontWeight:"bold"},children:e.title}),Object(p.jsx)("div",{style:{fontStyle:"italic",display:"inline-block",fontSize:"0.75rem",marginLeft:"3rem"},children:e.author}),Object(p.jsx)("div",{style:{display:"inline-block",fontSize:"1.5rem",float:"right"},children:e.date})]}),Object(p.jsx)("div",{style:{paddingBottom:"1rem"},children:e.postBody}),Object(p.jsx)(f.a,{}),Object(p.jsx)("div",{style:{display:"inline-block",marginTop:"0.5rem"},children:Object(p.jsxs)("p",{onMouseEnter:function(){document.getElementById("root").style.cursor="pointer"},onMouseLeave:function(){document.getElementById("root").style.cursor=null},onClick:function(){S(!C)},children:["Comments (",s.length,")"]})}),Object(p.jsx)("div",{style:{display:"inline-block",marginTop:"0.5rem",float:"right"},children:"2 min read"}),C&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(k,{refreshComments:I,postID:e.id,comments:s}),T.isLoggedIn&&Object(p.jsx)(x.a,{onKeyDown:E,value:b,onChange:function(e){h(e.target.value)},fullWidth:!0,placeholder:"Type your comment and hit enter",style:{display:"inline-flex"}})]})]})})},I=function(e){return Object(p.jsx)("div",{style:{marginTop:"3rem"},children:e.posts.map((function(e){return Object(p.jsx)(T,{id:e.id,title:e.title,postBody:Object(p.jsx)(O.a,{content:e.postBody}),date:e.createdAt,author:e.creator},e.id)}))})},E=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useContext)(v),s=Object(o.f)();function l(){return(l=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s("/create");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/posts/",{method:"DELETE",headers:{"Content-Type":"application/json"}});case 2:e.sent,a([]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){var e=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/api/posts/all");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[n.length]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{children:[c.isLoggedIn&&Object(p.jsx)(b.a,{onClick:function(){return l.apply(this,arguments)},children:"Create Post"}),Object(p.jsx)(h,{text:"Vitae tortor condimentum lacinia quis vel eros donec ac. Duis at consectetur lorem donec massa. Sollicitudin ac orci phasellus egestas tellus rutrum tellus. Elit ut aliquam purus sit. Quisque egestas diam in arcu cursus euismod."}),Object(p.jsx)(I,{posts:n}),c.isLoggedIn&&"admin"===c.userType&&Object(p.jsx)(b.a,{onClick:function(){return u.apply(this,arguments)},children:"Delete All Posts"})]})})},L=n(347),N=n(348),D=n(349),q=n(136),F=n(343),B=Object(q.a)({palette:{primary:{main:"#ffffff"}}}),P=Object(q.a)({palette:{primary:{main:"#ffffff"}}}),R=function(){var e=Object(r.useContext)(v);return Object(p.jsx)(L.a,{position:"absolute",display:"flex",children:Object(p.jsxs)(N.a,{children:[Object(p.jsx)("div",{style:{display:"contents",float:"left"},children:Object(p.jsx)(F.a,{theme:B,children:Object(p.jsx)(D.a,{color:"primary",component:l.b,to:"/",style:{textDecoration:"none",flex:1,padding:"1rem",paddingLeft:"0"},variant:"h3",children:"blog.js"})})}),Object(p.jsxs)("div",{style:{display:"flex",float:"right"},children:[!e.isLoggedIn&&Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)(F.a,{theme:B,children:Object(p.jsx)(l.b,{to:"/login",children:Object(p.jsx)(b.a,{style:{float:"right"},color:"primary",children:"Login"})})}),Object(p.jsx)(F.a,{theme:P,children:Object(p.jsx)(l.b,{to:"/register",children:Object(p.jsx)(b.a,{style:{float:"right"},color:"primary",children:"Register"})})})]}),e.isLoggedIn&&Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsxs)("div",{style:{display:"inline-block",paddingRight:"5rem",justifyContent:"center"},children:["Hello, ",e.firstName]}),Object(p.jsx)(F.a,{theme:B,children:Object(p.jsx)(l.b,{to:"/logout",children:Object(p.jsx)(b.a,{style:{float:"right"},color:"primary",children:"Logout"})})})]})]})]})})},W=n(55),A=n(345),J=n(338),U=n(352),z=n(341),G=n(353),M=n(346),V=n(351),Y=n(85),H=n.n(Y),K=n(350);function Q(e){return Object(p.jsxs)(D.a,Object(W.a)(Object(W.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ","Andrew Gasparovich"," ",(new Date).getFullYear(),"."]}))}var X=Object(q.a)(),Z=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(i.a)(c,2),l=s[0],u=s[1],m=Object(r.useContext)(v),h=g(),O=(h.isLoading,h.error,h.sendRequest),f=(h.clearError,Object(o.f)()),y=function(){var e=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O("http://localhost:5000/api/users/login","POST",JSON.stringify({email:n,password:l}),{"Content-Type":"application/json"});case 4:r=e.sent,m.login(r.userId,r.token,r.userName,r.userType,r.fullName),f("/"),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(F.a,{theme:X,children:Object(p.jsxs)(K.a,{className:"mainBody",component:"main",maxWidth:"xs",children:[Object(p.jsx)(J.a,{}),Object(p.jsxs)(V.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsx)(A.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(p.jsx)(H.a,{})}),Object(p.jsx)(D.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(p.jsxs)(V.a,{component:"form",onSubmit:y,noValidate:!0,sx:{mt:1},children:[Object(p.jsx)(x.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){a(e.target.value)}}),Object(p.jsx)(x.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){u(e.target.value)}}),Object(p.jsx)(U.a,{control:Object(p.jsx)(z.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(p.jsx)(b.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(p.jsxs)(M.a,{container:!0,children:[Object(p.jsx)(M.a,{item:!0,xs:!0,children:Object(p.jsx)(G.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(p.jsx)(M.a,{item:!0,children:Object(p.jsx)(G.a,{href:"../register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]}),Object(p.jsx)(Q,{sx:{mt:8,mb:4}})]})})};function $(e){return Object(p.jsxs)(D.a,Object(W.a)(Object(W.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(p.jsx)(G.a,{color:"inherit",href:"https://mui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]}))}var _=Object(q.a)(),ee=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(i.a)(c,2),l=s[0],u=s[1],m=Object(r.useState)(""),h=Object(i.a)(m,2),O=h[0],f=h[1],y=Object(r.useState)(""),w=Object(i.a)(y,2),C=w[0],S=w[1],k=Object(r.useContext)(v),T=g(),I=(T.isLoading,T.error,T.sendRequest),E=(T.clearError,Object(o.f)()),L=function(){var e=Object(d.a)(j.a.mark((function e(t){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=new FormData(t.currentTarget),console.log(r.values),e.prev=3,e.next=6,I("http://localhost:5000/api/users/register","POST",JSON.stringify({firstName:n,lastName:l,email:O,password:C,userType:"user"}),{"Content-Type":"application/json"});case 6:return e.sent,e.next=9,I("http://localhost:5000/api/users/login","POST",JSON.stringify({email:O,password:C}),{"Content-Type":"application/json"});case 9:a=e.sent,k.login(a.userId,a.token,a.userName,a.userType),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(3);case 15:E("/");case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(F.a,{theme:_,children:Object(p.jsxs)(K.a,{component:"main",maxWidth:"xs",children:[Object(p.jsx)(J.a,{}),Object(p.jsxs)(V.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsx)(A.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(p.jsx)(H.a,{})}),Object(p.jsx)(D.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(p.jsxs)(V.a,{component:"form",noValidate:!0,onSubmit:L,sx:{mt:3},children:[Object(p.jsxs)(M.a,{container:!0,spacing:2,children:[Object(p.jsx)(M.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(x.a,{autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:n,onChange:function(e){a(e.target.value)}})}),Object(p.jsx)(M.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(x.a,{required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name",value:l,onChange:function(e){u(e.target.value)}})}),Object(p.jsx)(M.a,{item:!0,xs:12,children:Object(p.jsx)(x.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:O,onChange:function(e){f(e.target.value)}})}),Object(p.jsx)(M.a,{item:!0,xs:12,children:Object(p.jsx)(x.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:C,onChange:function(e){S(e.target.value)}})}),Object(p.jsx)(M.a,{item:!0,xs:12,children:Object(p.jsx)(U.a,{control:Object(p.jsx)(z.a,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive inspiration, marketing promotions and updates via email."})})]}),Object(p.jsx)(b.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(p.jsx)(M.a,{container:!0,justifyContent:"flex-end",children:Object(p.jsx)(M.a,{item:!0,children:Object(p.jsx)(G.a,{href:"#",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(p.jsx)($,{sx:{mt:5}})]})})},te=n(135),ne=n.n(te),re=(n(286),n(287),function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(i.a)(c,2),l=s[0],u=s[1],m=g(),O=(m.isLoading,m.error,m.sendRequest),f=(m.clearError,Object(o.f)()),w=Object(r.useContext)(v),C=function(){var e=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O("".concat(y.ServerURL,"api/users/").concat(w.userId),"GET");case 4:return r=e.sent,e.next=7,O("http://localhost:5000/api/posts/create","POST",JSON.stringify({title:""===l?"Test Post":l,postBody:""===n?"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.":n,creator:r.name,creatorID:w.userId,comments:[],reactions:[]}),{"Content-Type":"application/json"});case 7:e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:f("/");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h,{text:""}),Object(p.jsxs)("form",{onSubmit:C,children:[Object(p.jsx)("div",{style:{backgroundColor:"white"},children:Object(p.jsx)(x.a,{autoFocus:!0,type:"text",style:{display:"flex",marginBottom:"1rem"},id:"outlined-basic",variant:"outlined",placeholder:"Post title...",value:l,onChange:function(e){u(e.target.value)}})}),Object(p.jsx)("div",{style:{backgroundColor:"white"},children:Object(p.jsx)(ne.a,{theme:"snow",placeholder:"Start creating your masterpiece...",value:n,onChange:function(e){a(e)}})}),Object(p.jsx)("div",{className:"container",children:Object(p.jsx)(b.a,{type:"submit",variant:"contained",size:"large",children:"Submit Post"})})]})]})}),ae=function(){var e,t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),u=Object(i.a)(s,2),j=u[0],d=u[1],b=Object(r.useState)(""),m=Object(i.a)(b,2),h=m[0],O=m[1],x=Object(r.useState)(""),f=Object(i.a)(x,2),g=f[0],y=f[1],w=Object(r.useState)(""),C=Object(i.a)(w,2),S=C[0],k=C[1],T=Object(r.useCallback)((function(e,t,n,r,a){c(t),d(e),O(n),y(r),k(a),console.log("logged in! welcome, "+n+" ("+r+")")}),[]),I=Object(r.useCallback)((function(){c(null),d(null),O(null),y(null),console.log("logged out!")}),[]);return e=a?Object(p.jsx)(r.Fragment,{children:Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/",element:Object(p.jsx)(E,{}),exact:!0}),Object(p.jsx)(o.a,{path:"/create",element:Object(p.jsx)(re,{}),exact:!0})]})}):Object(p.jsx)(r.Fragment,{children:Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/",element:Object(p.jsx)(E,{}),exact:!0}),Object(p.jsx)(o.a,{path:"/login",element:Object(p.jsx)(Z,{}),exact:!0}),Object(p.jsx)(o.a,{path:"/register",element:Object(p.jsx)(ee,{}),exact:!0})]})}),Object(p.jsx)(v.Provider,{value:{userId:j,fullName:S,firstName:h,userType:g,isLoggedIn:!!a,token:a,login:T,logout:I},children:Object(p.jsx)(l.a,{children:Object(p.jsxs)("div",{className:"mainBody",children:[Object(p.jsx)(R,{}),e]})})})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,356)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(ae,{})}),document.getElementById("root")),ce()},42:function(e,t){e.exports="http://localhost:5000/"}},[[289,1,2]]]);
//# sourceMappingURL=main.6ad17b1b.chunk.js.map