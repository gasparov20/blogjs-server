(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,n){},170:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},185:function(e,t,n){},293:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var a=n(66),c=n(0),r=n.n(c),s=n(21),i=n.n(s),o=(n(170),n(15)),l=n.n(o),u=n(19),j=n(7),d=(n(172),n(173),n(174),n(175),n(176),n(14)),b=n(39),p=n(375),x=n(357),O=n(366),m=n(376),h=n(370),f=(n(177),n(1)),g=function(e){return Object(f.jsx)("div",{style:{margin:"50px"},children:Object(f.jsx)(h.a,{className:"center-div",style:{padding:"30px"},elevation:2,children:Object(f.jsx)("p",{style:{fontSize:"1.25rem"},children:e.text})})})},v=n(83),y=n(367),S=n(374),k=n(356),C=function(){var e=Object(c.useState)(!0),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(j.a)(r,2),i=s[0],o=s[1],d=Object(c.useRef)([]),b=Object(c.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c,r,s,i,u,j=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.length>1&&void 0!==j[1]?j[1]:"GET",c=j.length>2&&void 0!==j[2]?j[2]:null,r=j.length>3&&void 0!==j[3]?j[3]:{},a(!0),s=new AbortController,d.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:c,headers:r,signal:s.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(u=e.sent,i.ok){e.next=16;break}throw console.log(i),new Error(u.message);case 16:return a(!1),e.abrupt("return",u);case 20:throw e.prev=20,e.t0=e.catch(6),o(e.t0.message),e.t0;case 24:a(!1);case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(c.useEffect)((function(){return function(){d.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:i,sendRequest:b,clearError:function(){o(null)}}},w=Object(c.createContext)({userId:null,userFirstName:null,userType:null,isLoggedIn:!1,token:null,login:function(){},logout:function(){}}),E=n(363),I=n(373),T=n(365),N=n(371),D=n(103),L=n.n(D);function F(e){var t=c.useState(!1),n=Object(j.a)(t,2),a=n[0],r=n[1],s=function(){r(!1)};return Object(f.jsxs)("div",{style:{alignSelf:"center"},children:[Object(f.jsx)(L.a,{onMouseEnter:function(){document.getElementById("root").style.cursor="pointer"},onMouseLeave:function(){document.getElementById("root").style.cursor=null},onClick:function(){r(!0)}}),Object(f.jsxs)(E.a,{open:a,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(f.jsx)(T.a,{children:Object(f.jsx)(N.a,{id:"alert-dialog-description",children:"Are you sure you want to delete your comment?"})}),Object(f.jsxs)(I.a,{children:[Object(f.jsx)(O.a,{onClick:s,children:"No"}),Object(f.jsx)(O.a,{onClick:function(){r(!1),e.callback()},autoFocus:!0,children:"Yes"})]})]})]})}var A,R=function(e){var t=Object(c.useContext)(w),n=C(),a=(n.isLoading,n.error,n.sendRequest),r=(n.clearError,Object(c.useCallback)(Object(u.a)(l.a.mark((function n(){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("called back"),n.next=3,a("".concat("http://localhost:4000/api","/posts/").concat(e.postID,"/comments/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+t.token});case 3:c=n.sent,e.refreshComments(c);case 5:case"end":return n.stop()}}),n)}))),[a,t.token,e]));return Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(f.jsxs)("p",{style:{paddingLeft:"20px",flexGrow:"1"},children:[!!e.creatorID&&Object(f.jsxs)("strong",{children:["".concat(e.creatorID.firstName," ").concat(e.creatorID.lastName),":"," "]}),e.comment]}),("admin"===t.userType||t.userId===e.creatorID._id||t.userId===e.creatorID._id)&&Object(f.jsx)(F,{callback:r})]},e.id)},P=function(e){return Object(f.jsx)("div",{children:e.comments.map((function(t){return Object(f.jsx)(R,{refreshComments:e.refreshComments,postID:e.postID,id:t._id||t.id,comment:t.comment,creatorID:t.creatorID},t._id||t.id)}))})},B=(n(115),function(e){var t=C(),n=(t.isLoading,t.error,t.sendRequest),a=(t.clearError,Object(c.useState)(e.comments)),r=Object(j.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(""),b=Object(j.a)(o,2),p=b[0],x=b[1],O=Object(c.useState)(!1),m=Object(j.a)(O,2),g=m[0],v=m[1],E=Object(c.useContext)(w),I=Object(c.useState)(!1),T=Object(j.a)(I,2),N=(T[0],T[1],Object(d.f)()),D=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SERVER_URL:"http://localhost:4000/api",REACT_APP_STATIC_URL:"http://localhost:4000"}));var L=function(){var t=Object(u.a)(l.a.mark((function t(a){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(13!==a.keyCode){t.next=6;break}return t.next=3,n("".concat("http://localhost:4000/api","/posts/").concat(e.id,"/comments/add"),"POST",JSON.stringify({comment:p,creatorID:E.userId}),{Authorization:"Bearer "+E.token,"Content-Type":"application/json"});case 3:c=t.sent,x(""),i(c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsx)("div",{style:{margin:"50px"},children:Object(f.jsxs)(h.a,{className:"center-div",style:{padding:"30px"},elevation:2,children:[Object(f.jsx)("div",{className:"title",children:Object(f.jsxs)("div",{className:"post-header",children:[Object(f.jsx)("p",{style:{fontSize:"24px",fontWeight:"500",marginLeft:"20px",marginRight:"50px"},children:e.title}),Object(f.jsxs)("div",{className:"user",onMouseEnter:function(){document.getElementById("root").style.cursor="pointer"},onMouseLeave:function(){document.getElementById("root").style.cursor=null},onClick:function(){N("/users/".concat(e.creator._id||e.creator.id))},children:[Object(f.jsx)("div",{className:"p",children:Object(f.jsx)(y.a,{src:"".concat("http://localhost:4000").concat(e.creator.image)})}),Object(f.jsx)("p",{style:{fontSize:"14px",fontWeight:"600",paddingLeft:"10px"},children:e.author})]}),Object(f.jsx)("div",{style:{flexGrow:"1"}}),Object(f.jsx)("p",{style:{fontSize:"18px",marginRight:"20px"},children:function(e){var t=e.substring(11,16),n=e.substring(0,4),a=e.substring(5,7),c=e.substring(8,10);return"".concat(t," ").concat(a,"/").concat(c,"/").concat(n)}(e.date)})]})}),Object(f.jsx)("div",{style:{fontSize:"18px"},children:e.postBody}),Object(f.jsx)(S.a,{style:{margin:"15px"}}),Object(f.jsxs)("p",{onMouseEnter:function(){document.getElementById("root").style.cursor="pointer"},onMouseLeave:function(){document.getElementById("root").style.cursor=null},onClick:function(){v(!g)},children:["Comments (",s.length,")"]}),g&&Object(f.jsxs)(f.Fragment,{children:[s.length>0&&Object(f.jsx)(P,{refreshComments:D,postID:e.id,comments:s}),!E.isLoggedIn&&0===s.length&&Object(f.jsx)("p",{style:{display:"inline-block",paddingLeft:"20px"},children:"No comments yet, log in to post one."}),!E.isLoggedIn&&s.length>0&&Object(f.jsx)("p",{style:{display:"inline-block",paddingLeft:"20px"},children:"Log in to join the conversation."}),"unverified"===E.token&&s.length>0&&Object(f.jsx)("p",{style:{display:"inline-block",paddingLeft:"20px"},children:"Verify your account to join the conversation."}),E.isLoggedIn&&"unverified"!=E.token&&Object(f.jsx)(k.a,{onKeyDown:L,value:p,onChange:function(e){x(e.target.value)},fullWidth:!0,placeholder:"Type your comment and hit enter",style:{display:"inline-flex"}})]})]})})}),q=function(e){return Object(f.jsx)(f.Fragment,{children:e.posts.map((function(e){return Object(f.jsx)(B,{id:e._id||e.id,title:e.title,postBody:Object(f.jsx)(v.a,{content:e.postBody}),comments:e.comments,date:e.createdAt,author:"".concat(e.creatorID.firstName," ").concat(e.creatorID.lastName),creator:e.creatorID},e._id||e.id)}))})},_=(n(185),function(e){var t=C(),n=(t.isLoading,t.error,t.sendRequest),a=(t.clearError,Object(c.useState)([])),r=Object(j.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)([]),b=Object(j.a)(o,2),h=(b[0],b[1],Object(c.useState)()),v=Object(j.a)(h,2),y=(v[0],v[1],Object(c.useState)(!1)),S=Object(j.a)(y,2),k=S[0],E=S[1],I=Object(c.useContext)(w),T=Object(d.f)(),N=Object(c.useCallback)(Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,n("".concat("http://localhost:4000/api","/posts/all"),"GET");case 4:t=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:a=t.reverse(),i(a),E(!1);case 12:case"end":return e.stop()}}),e,null,[[1,7]])}))),[n]);Object(c.useEffect)((function(){N()}),[N]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{in:e.successAlert,children:Object(f.jsx)(x.a,{variant:"filled",severity:"success",children:"Your post has been submitted! All posts must go through our moderation team before being published."})}),Object(f.jsxs)(p.a,{in:!e.successAlert,children:[I.isLoggedIn&&"unverified"!=I.token&&Object(f.jsx)("div",{className:"center",children:Object(f.jsx)(O.a,{variant:"contained",size:"medium",onClick:function(){T("/create")},children:"Create Post"})}),"unverified"===I.token&&Object(f.jsx)(x.a,{severity:"info",variant:"filled",children:"Welcome to The Blog! Please ask Andrew to verify your account to start posting and commenting (email verification under construction)."})]}),"admin"===I.userType&&Object(f.jsx)("div",{className:"center",children:Object(f.jsx)(O.a,{variant:"contained",size:"medium",onClick:function(){T("/publish")},children:"Moderate Posts"})}),Object(f.jsx)(g,{text:"Vitae tortor condimentum lacinia quis vel eros donec ac. Duis at consectetur lorem donec massa. Sollicitudin ac orci phasellus egestas tellus rutrum tellus. Elit ut aliquam purus sit. Quisque egestas diam in arcu cursus euismod."}),k?Object(f.jsx)(m.a,{}):Object(f.jsx)(q,{posts:s})]})}),z=n(358),W=function(e){return Object(f.jsx)("div",{style:{margin:"50px"},children:Object(f.jsxs)(h.a,{className:"center-div",style:{padding:"30px"},elevation:2,children:[Object(f.jsxs)("div",{className:"post-header",children:[Object(f.jsx)("p",{style:{fontSize:"24px",fontWeight:"500",marginLeft:"20px",marginRight:"50px"},children:e.title}),Object(f.jsx)("p",{style:{fontSize:"14px",fontStyle:"italic"},children:e.author}),Object(f.jsx)("p",{style:{fontSize:"18px",float:"right",marginRight:"20px"},children:function(e){var t=e.substring(11,16),n=e.substring(0,4),a=e.substring(5,7),c=e.substring(8,10);return"".concat(t," ").concat(a,"/").concat(c,"/").concat(n)}(e.date)})]}),Object(f.jsx)("p",{style:{fontSize:"18px"},children:e.postBody})]})})},J=function(e){var t=C(),n=(t.isLoading,t.error,t.sendRequest),a=(t.clearError,Object(c.useContext)(w)),r=Object(c.useState)([]),s=Object(j.a)(r,2),i=s[0],o=s[1],d=Object(c.useState)(),b=Object(j.a)(d,2),p=b[0],x=b[1],h=Object(c.useState)(0),y=Object(j.a)(h,2),S=y[0],k=y[1],E=Object(c.useState)(e.numPendingPosts),I=Object(j.a)(E,2),T=I[0],N=I[1],D=Object(c.useState)(!1),L=Object(j.a)(D,2),F=L[0],A=L[1],R=Object(c.useState)(!0),P=Object(j.a)(R,2),B=P[0],q=P[1];Object(c.useEffect)((function(){var e;q(!0);var t=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("".concat("http://localhost:4000/api","/posts/pending/all"),"GET",null,{Authorization:"Bearer "+a.token});case 3:e=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("Fetch all posts: "+t.t0.message);case 9:return t.prev=9,console.log(e),0===e.length?(N(0),o([]),x()):(e.length!==T&&N(e.length),o(e),x(e[S])),q(!1),t.finish(9);case 14:case"end":return t.stop()}}),t,null,[[0,6,9,14]])})));return function(){return t.apply(this,arguments)}}();t()}),[F,a.token,S,T,n]);var _=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(!0),e.next=4,n("".concat("http://localhost:4000/api","/posts/publish/").concat(p.id),"PUT",null,{Authorization:"Bearer "+a.token,"Content-Type":"application/json"});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Approve post: "+e.t0.message);case 10:return e.prev=10,q(!1),A(!F),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,7,10,14]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(!0),e.next=4,n("".concat("http://localhost:4000/api","/posts/").concat(p.id),"DELETE",{creatorID:p.creatorID._id},{Authorization:"Bearer "+a.token});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Reject post: "+e.t0.message);case 10:return e.prev=10,q(!1),A(!F),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,7,10,14]])})));return function(){return e.apply(this,arguments)}}();return B?Object(f.jsx)("div",{className:"center-div",children:Object(f.jsx)(m.a,{})}):0===T?Object(f.jsx)(g,{text:"No posts to moderate."}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(g,{text:"You currently have ".concat(T," pending posts. When all posts have been evaluated, there may be more.")}),Object(f.jsx)(W,{title:i[S].title,postBody:Object(f.jsx)(v.a,{content:i[S].postBody}),date:i[S].createdAt,author:"".concat(i[S].creatorID.firstName," ").concat(i[S].creatorID.lastName)},i[S].id),Object(f.jsxs)("div",{className:"center",children:[Object(f.jsx)(O.a,{size:"large",onClick:_,children:"Approve"}),Object(f.jsx)(O.a,{size:"large",onClick:J,children:"Reject"})]}),Object(f.jsx)("div",{className:"center",children:Object(f.jsx)(z.a,{onChange:function(e,t){k(t-1)},count:T,size:"large",variant:"text"})})]})},G=n(377),M=n(378),U=n(379),V=n(372),H=n(142),K=n(369),Y=function(e){var t=Object(c.useContext)(w),n=Object(d.f)(),a=C(),r=(a.isLoading,a.error,a.sendRequest,a.clearError,Object(H.a)({palette:{primary:{main:"#ffffff"}}})),s=Object(H.a)({palette:{primary:{main:"#ffffff"}}});return Object(f.jsx)(G.a,{children:Object(f.jsxs)(M.a,{children:[Object(f.jsx)(U.a,{display:"flex",flexGrow:1,children:Object(f.jsx)(K.a,{theme:r,children:Object(f.jsx)(V.a,{style:{textDecoration:"none"},color:"primary",component:b.b,to:"/",variant:"h3",children:"blog.js"})})}),!t.isLoggedIn&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(K.a,{theme:r,children:Object(f.jsx)(O.a,{color:"primary",onClick:function(){n("/login")},children:"Login"})}),Object(f.jsx)(K.a,{theme:s,children:Object(f.jsx)(O.a,{color:"primary",onClick:function(){n("/register")},children:"Register"})})]}),t.isLoggedIn&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("p",{style:{marginRight:"30px"},children:["Hello, ",t.userFirstName]}),Object(f.jsx)(K.a,{theme:r,children:Object(f.jsx)(O.a,{color:"primary",onClick:t.logout,children:"Logout"})})]})]})})},Q=n(355),X=n(381),Z=n(361),$=n(382),ee=n(368),te=n(84),ne=n.n(te),ae=n(380),ce=Object(H.a)(),re=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(j.a)(r,2),i=s[0],o=s[1],b=Object(c.useState)(!1),p=Object(j.a)(b,2),m=p[0],h=p[1],g=Object(c.useContext)(w),v=C(),S=(v.isLoading,v.error,v.sendRequest),E=(v.clearError,Object(d.f)()),I=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h(!1),a=!0,e.prev=3,e.next=6,S("".concat("http://localhost:4000/api","/users/login"),"POST",JSON.stringify({email:n,password:i}),{"Content-Type":"application/json"});case 6:c=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),a=!1,h(!0);case 13:a&&(g.login(c.userId,c.token,c.userName,c.userType,null),E("/"));case 14:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(K.a,{theme:ce,children:Object(f.jsxs)(ae.a,{className:"mainBody",component:"main",maxWidth:"xs",children:[Object(f.jsx)(Q.a,{}),Object(f.jsxs)(U.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(f.jsx)(y.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(f.jsx)(ne.a,{})}),Object(f.jsx)(V.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(f.jsxs)(U.a,{component:"form",onSubmit:I,noValidate:!0,sx:{mt:1},children:[Object(f.jsx)(k.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){a(e.target.value)}}),Object(f.jsx)(k.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){o(e.target.value)}}),Object(f.jsx)(X.a,{control:Object(f.jsx)(Z.a,{value:"remember",color:"primary"}),label:"Remember me"}),m&&Object(f.jsx)(ee.a,{item:!0,xs:12,children:Object(f.jsx)(x.a,{severity:"error",children:"Could not find a user with those credentials."})}),Object(f.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(f.jsxs)(ee.a,{container:!0,children:[Object(f.jsx)(ee.a,{item:!0,xs:!0,children:Object(f.jsx)($.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(f.jsx)(ee.a,{item:!0,children:Object(f.jsx)($.a,{href:"../register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})]})})},se=Object(H.a)(),ie=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(j.a)(r,2),i=s[0],o=s[1],b=Object(c.useState)(""),p=Object(j.a)(b,2),m=p[0],h=p[1],g=Object(c.useState)(""),v=Object(j.a)(g,2),S=v[0],E=v[1],I=Object(c.useContext)(w),T=C(),N=(T.isLoading,T.error,T.sendRequest),D=(T.clearError,Object(d.f)()),L=Object(c.useState)(!1),F=Object(j.a)(L,2),A=F[0],R=F[1],P=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),new FormData(t.currentTarget),e.prev=2,e.next=5,N("".concat("http://localhost:4000/api","/users/register"),"POST",JSON.stringify({firstName:n,lastName:i,email:m,password:S}),{"Content-Type":"application/json"});case 5:if(a=e.sent,console.log(a),!a.message){e.next=11;break}if("email address already in use"!==a.message){e.next=11;break}return R(!0),e.abrupt("return");case 11:return e.next=13,N("".concat("http://localhost:4000/api","/users/login"),"POST",JSON.stringify({email:m,password:S}),{"Content-Type":"application/json"});case 13:c=e.sent,I.login(c.userId,c.token,c.userName,c.userType),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(2);case 19:D("/");case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(K.a,{theme:se,children:Object(f.jsxs)(ae.a,{component:"main",maxWidth:"xs",children:[Object(f.jsx)(Q.a,{}),Object(f.jsxs)(U.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(f.jsx)(y.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(f.jsx)(ne.a,{})}),Object(f.jsx)(V.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(f.jsxs)(U.a,{component:"form",noValidate:!0,onSubmit:P,sx:{mt:3},children:[Object(f.jsxs)(ee.a,{container:!0,spacing:2,children:[Object(f.jsx)(ee.a,{item:!0,xs:12,sm:6,children:Object(f.jsx)(k.a,{autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:n,onChange:function(e){a(e.target.value)}})}),Object(f.jsx)(ee.a,{item:!0,xs:12,sm:6,children:Object(f.jsx)(k.a,{required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name",value:i,onChange:function(e){o(e.target.value)}})}),Object(f.jsx)(ee.a,{item:!0,xs:12,children:Object(f.jsx)(k.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:m,onChange:function(e){h(e.target.value)}})}),Object(f.jsx)(ee.a,{item:!0,xs:12,children:Object(f.jsx)(k.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:S,onChange:function(e){E(e.target.value)}})}),A&&Object(f.jsx)(ee.a,{item:!0,xs:12,children:Object(f.jsx)(x.a,{severity:"error",children:"Email address already in use."})})]}),Object(f.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(f.jsx)(ee.a,{container:!0,justifyContent:"flex-end",children:Object(f.jsx)(ee.a,{item:!0,children:Object(f.jsx)($.a,{href:"/login",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})})},oe=function(){var e=Object(d.g)().id,t=C().sendRequest,n=Object(c.useContext)(w),a=Object(c.useState)(!0),r=Object(j.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(),b=Object(j.a)(o,2),p=b[0],x=b[1],O=Object(c.useCallback)(Object(u.a)(l.a.mark((function a(){var c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i(!0),a.prev=1,a.next=4,t("".concat("http://localhost:4000/api","/users/id/").concat(e),"GET",null,{Authorization:"Bearer "+n.token});case 4:c=a.sent,a.next=9;break;case 7:a.prev=7,a.t0=a.catch(1);case 9:x(c),console.log(c),i(!1);case 12:case"end":return a.stop()}}),a,null,[[1,7]])}))),[n.token,e,t]);return Object(c.useEffect)((function(){O()}),[O]),Object(f.jsx)(f.Fragment,{children:s?Object(f.jsx)(m.a,{}):Object(f.jsx)(g,{text:"This is "+p.firstName+" "+p.lastName+"'s profile"})})},le=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(g,{text:"You do not have permission to access this page."})})},ue=n(141),je=n.n(ue),de=(n(292),Object(c.createContext)({setAlert:function(){}})),be=(n(293),function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),o=i[0],b=i[1],p=C(),x=(p.isLoading,p.error,p.sendRequest),m=(p.clearError,Object(d.f)()),h=Object(c.useContext)(w),v=Object(c.useContext)(de),y=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,x("".concat("http://localhost:4000/api","/posts/create"),"POST",JSON.stringify({title:""===o?"Test Post":o,postBody:""===a?"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.":a,creatorID:h.userId}),{Authorization:"Bearer "+h.token,"Content-Type":"application/json"});case 4:e.sent,console.log("if this runs why doesn't navigate?"),v.setAlert(),m("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Create post error: "+e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(g,{text:""}),Object(f.jsxs)("form",{onSubmit:y,children:[Object(f.jsx)("div",{style:{backgroundColor:"white"},children:Object(f.jsx)(k.a,{autoFocus:!0,type:"text",style:{display:"flex",marginBottom:"1rem"},id:"outlined-basic",variant:"outlined",placeholder:"Post title...",value:o,onChange:function(e){b(e.target.value)}})}),Object(f.jsx)("div",{style:{backgroundColor:"white"},children:Object(f.jsx)(je.a,{theme:"snow",placeholder:"Start creating your masterpiece...",value:a,onChange:function(e){r(e)}})}),Object(f.jsx)("div",{className:"center-div-btn",children:Object(f.jsx)(O.a,{type:"submit",variant:"contained",size:"large",children:"Submit Post"})})]})]})}),pe=n(55),xe=function(){var e=C(),t=(e.isLoading,e.error,e.sendRequest),n=(e.clearError,Object(c.useState)(!1)),a=Object(j.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(),o=Object(j.a)(i,2),p=o[0],x=o[1],O=Object(c.useState)(),m=Object(j.a)(O,2),h=m[0],g=m[1],v=Object(c.useState)(),y=Object(j.a)(v,2),S=y[0],k=y[1],E=Object(c.useState)(),I=Object(j.a)(E,2),T=I[0],N=I[1],D=Object(c.useState)(),L=Object(j.a)(D,2),F=L[0],R=(L[1],Object(c.useState)(!1)),P=Object(j.a)(R,2),B=P[0],q=P[1],z=Object(c.useState)(!1),W=Object(j.a)(z,2),G=W[0],M=W[1],U=(Object(pe.d)(),Object(c.useCallback)((function(e,t,n,a,c){M("unverified"!==t),s(t),x(e),k(n),g(a);var r=c||new Date((new Date).getTime()+36e5);N(r),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:r.toISOString()}))}),[])),V=Object(c.useCallback)((function(){s(null),x(null),N(null),k(null),g(null),M(!1),localStorage.removeItem("userData")}),[]);Object(c.useEffect)((function(){if(r&&T){var e=new Date,t=T.getTime()-e.getTime();A=setTimeout(V,t)}else clearTimeout(A)}),[r,V,T]);var H=Object(c.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("".concat("http://localhost:4000/api","/users/").concat(n),"GET");case 3:a=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:k(a.firstName),g(a.userType);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[t]);Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&H(e.userId),e&&e.token&&new Date(e.expiration)>new Date&&U(e.userId,e.token,S,h,new Date(e.expiration))}),[U,H,S,h]);var K,Q=Object(c.useCallback)((function(){q(!0),setTimeout((function(){q(!1)}),5e3)}),[]);return K="unverified"!==r&&"admin"===h?Object(f.jsx)(c.Fragment,{children:Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{exact:!0,path:"/users/:id",element:Object(f.jsx)(oe,{})}),Object(f.jsx)(d.a,{path:"/",element:Object(f.jsx)(_,{successAlert:B}),exact:!0}),Object(f.jsx)(d.a,{path:"/create",element:Object(f.jsx)(be,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/login",element:Object(f.jsx)(_,{successAlert:B}),exact:!0}),Object(f.jsx)(d.a,{path:"/publish",element:Object(f.jsx)(J,{numPendingPosts:F}),exact:!0})]})}):"unverified"!==r&&G?Object(f.jsx)(c.Fragment,{children:Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{path:"/users/:id",element:Object(f.jsx)(oe,{})}),Object(f.jsx)(d.a,{path:"/",element:Object(f.jsx)(_,{successAlert:B}),exact:!0}),Object(f.jsx)(d.a,{path:"/create",element:Object(f.jsx)(be,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/login",element:Object(f.jsx)(_,{successAlert:B}),exact:!0}),Object(f.jsx)(d.a,{path:"/publish",element:Object(f.jsx)(le,{}),exact:!0})]})}):Object(f.jsx)(c.Fragment,{children:Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{exact:!0,path:"/users/:id",element:"unverified"===r?Object(f.jsx)(oe,{}):Object(f.jsx)(le,{})}),Object(f.jsx)(d.a,{path:"/",element:Object(f.jsx)(_,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/create",element:Object(f.jsx)(le,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/login",element:Object(f.jsx)(re,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/register",element:Object(f.jsx)(ie,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/publish",element:Object(f.jsx)(le,{}),exact:!0})]})}),Object(f.jsx)(de.Provider,{value:{setAlert:Q},children:Object(f.jsx)(w.Provider,{value:{userId:p,userFirstName:S,userType:h,isLoggedIn:!!r,token:r,login:U,logout:V},children:Object(f.jsxs)(b.a,{children:[Object(f.jsx)(Y,{}),Object(f.jsx)("div",{className:"main",children:K})]})})})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,383)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},me={position:pe.b.TOP_CENTER,timeout:8e3,offset:"0px",transition:pe.c.FADE,type:"success"},he={backgroundColor:"#FFFFFF",color:"black",padding:"20px",borderRadius:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0px 2px 2px 2px rgba(0, 0, 0, 0.03)",fontFamily:"Arial",width:"350px",boxSizing:"border-box"};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(pe.a,Object(a.a)(Object(a.a)({template:function(e){var t=e.message,n=(e.options,e.style);e.close;return Object(f.jsx)("div",{style:Object(a.a)(Object(a.a)({},he),n),children:Object(f.jsx)("span",{style:{flex:2},children:t})})}},me),{},{children:Object(f.jsx)(xe,{onClick:function(e){console.log("removing alert"),e.remove(e)}})}))}),document.getElementById("root")),Oe()}},[[295,1,2]]]);
//# sourceMappingURL=main.fa073669.chunk.js.map