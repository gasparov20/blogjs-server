(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t,n){},170:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},185:function(e,t,n){},293:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var a=n(66),c=n(0),r=n.n(c),s=n(21),i=n.n(s),o=(n(170),n(15)),l=n.n(o),u=n(19),j=n(7),d=(n(172),n(173),n(174),n(175),n(176),n(14)),b=n(39),x=n(380),p=n(356),O=n(362),m=n(381),h=n(376),f=(n(177),n(1)),g=function(e){return Object(f.jsx)("div",{style:{margin:"50px"},children:Object(f.jsx)(h.a,{className:"center-div",style:{padding:"30px"},elevation:2,children:Object(f.jsx)("p",{style:{fontSize:"1.25rem"},children:e.text})})})},v=n(82),y=n(363),k=n(379),S=n(355),C=function(){var e=Object(c.useState)(!0),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(j.a)(r,2),i=s[0],o=s[1],d=Object(c.useRef)([]),b=Object(c.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c,r,s,i,u,j=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.length>1&&void 0!==j[1]?j[1]:"GET",c=j.length>2&&void 0!==j[2]?j[2]:null,r=j.length>3&&void 0!==j[3]?j[3]:{},a(!0),s=new AbortController,d.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:c,headers:r,signal:s.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(u=e.sent,i.ok){e.next=15;break}throw new Error(u.message);case 15:return a(!1),e.abrupt("return",u);case 19:throw e.prev=19,e.t0=e.catch(6),o(e.t0.message),e.t0;case 23:a(!1);case 24:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(c.useEffect)((function(){return function(){d.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:i,sendRequest:b,clearError:function(){o(null)}}},w=Object(c.createContext)({userId:null,userFirstName:null,userType:null,isLoggedIn:!1,token:null,login:function(){},logout:function(){}}),I=n(365),N=n(378),D=n(367),E=n(377),T=n(139),F=n.n(T);function L(e){var t=c.useState(!1),n=Object(j.a)(t,2),a=n[0],r=n[1],s=function(){r(!1)};return Object(f.jsxs)("div",{style:{alignSelf:"center"},children:[Object(f.jsx)(F.a,{onMouseEnter:function(){document.getElementById("root").style.cursor="pointer"},onMouseLeave:function(){document.getElementById("root").style.cursor=null},onClick:function(){r(!0)}}),Object(f.jsxs)(I.a,{open:a,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(f.jsx)(D.a,{children:Object(f.jsx)(E.a,{id:"alert-dialog-description",children:"Are you sure you want to delete your comment?"})}),Object(f.jsxs)(N.a,{children:[Object(f.jsx)(O.a,{onClick:s,children:"No"}),Object(f.jsx)(O.a,{onClick:function(){r(!1),e.callback()},autoFocus:!0,children:"Yes"})]})]})]})}var A,q=function(e){var t=Object(c.useContext)(w),n=C().sendRequest,a=Object(c.useCallback)(Object(u.a)(l.a.mark((function a(){var c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n("".concat("/api","/posts/").concat(e.postID,"/comments/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+t.token});case 2:c=a.sent,e.refreshComments(c);case 4:case"end":return a.stop()}}),a)}))),[n,t.token,e]);return Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(f.jsxs)("p",{style:{paddingLeft:"20px",flexGrow:"1"},children:[!!e.creatorID&&Object(f.jsxs)("strong",{children:["".concat(e.creatorID.firstName," ").concat(e.creatorID.lastName),":"," "]}),e.comment]}),("admin"===t.userType||t.userId===e.creatorID._id||t.userId===e.creatorID._id)&&Object(f.jsx)(L,{callback:a})]},e.id)},B=function(e){return Object(f.jsx)("div",{children:e.comments.map((function(t){return Object(f.jsx)(q,{refreshComments:e.refreshComments,postID:e.postID,id:t._id||t.id,comment:t.comment,creatorID:t.creatorID},t._id||t.id)}))})},z=(n(114),function(e){var t=C().sendRequest,n=Object(c.useState)(e.comments),a=Object(j.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),b=o[0],x=o[1],p=Object(c.useState)(!1),O=Object(j.a)(p,2),m=O[0],g=O[1],v=Object(c.useContext)(w),I=Object(d.f)(),N=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var n=Object(u.a)(l.a.mark((function n(a){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(13!==a.keyCode){n.next=6;break}return n.next=3,t("".concat("/api","/posts/").concat(e.id,"/comments/add"),"POST",JSON.stringify({comment:b,creatorID:v.userId}),{Authorization:"Bearer "+v.token,"Content-Type":"application/json"});case 3:c=n.sent,x(""),s(c);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(f.jsx)("div",{style:{margin:"50px"},children:Object(f.jsxs)(h.a,{className:"center-div",style:{padding:"30px"},elevation:2,children:[Object(f.jsx)("div",{className:"title",children:Object(f.jsxs)("div",{className:"post-header",children:[Object(f.jsx)("p",{style:{fontSize:"24px",fontWeight:"500",marginLeft:"20px",marginRight:"50px"},children:e.title}),Object(f.jsxs)("div",{className:"user",onMouseEnter:function(){document.getElementById("root").style.cursor="pointer"},onMouseLeave:function(){document.getElementById("root").style.cursor=null},onClick:function(){I("/users/".concat(e.creator._id||e.creator.id))},children:[Object(f.jsx)("div",{className:"p",children:Object(f.jsx)(y.a,{src:"".concat("/").concat(e.creator.image)})}),Object(f.jsx)("p",{style:{fontSize:"14px",fontWeight:"600",paddingLeft:"10px"},children:e.author})]}),Object(f.jsx)("div",{style:{flexGrow:"1"}}),Object(f.jsx)("p",{style:{fontSize:"18px",marginRight:"20px"},children:function(e){var t=e.substring(11,16),n=e.substring(0,4),a=e.substring(5,7),c=e.substring(8,10);return"".concat(t," ").concat(a,"/").concat(c,"/").concat(n)}(e.date)})]})}),Object(f.jsx)("div",{style:{fontSize:"18px"},children:e.postBody}),Object(f.jsx)(k.a,{style:{margin:"15px"}}),Object(f.jsxs)("p",{onMouseEnter:function(){document.getElementById("root").style.cursor="pointer"},onMouseLeave:function(){document.getElementById("root").style.cursor=null},onClick:function(){g(!m)},children:["Comments (",r.length,")"]}),m&&Object(f.jsxs)(f.Fragment,{children:[r.length>0&&Object(f.jsx)(B,{refreshComments:N,postID:e.id,comments:r}),!v.isLoggedIn&&0===r.length&&Object(f.jsx)("p",{style:{display:"inline-block",paddingLeft:"20px"},children:"No comments yet, log in to post one."}),!v.isLoggedIn&&r.length>0&&Object(f.jsx)("p",{style:{display:"inline-block",paddingLeft:"20px"},children:"Log in to join the conversation."}),"unverified"===v.token&&r.length>0&&Object(f.jsx)("p",{style:{display:"inline-block",paddingLeft:"20px"},children:"Verify your account to join the conversation."}),v.isLoggedIn&&"unverified"!==v.token&&Object(f.jsx)(S.a,{onKeyDown:D,value:b,onChange:function(e){x(e.target.value)},fullWidth:!0,placeholder:"Type your comment and hit enter",style:{display:"inline-flex"}})]})]})})}),R=function(e){return Object(f.jsx)(f.Fragment,{children:e.posts.map((function(e){return Object(f.jsx)(z,{id:e._id||e.id,title:e.title,postBody:Object(f.jsx)(v.a,{content:e.postBody}),comments:e.comments,date:e.createdAt,author:"".concat(e.creatorID.firstName," ").concat(e.creatorID.lastName),creator:e.creatorID},e._id||e.id)}))})},P=(n(185),function(e){var t=C(),n=(t.isLoading,t.error,t.sendRequest),a=(t.clearError,Object(c.useState)([])),r=Object(j.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)([]),b=Object(j.a)(o,2),h=(b[0],b[1],Object(c.useState)()),v=Object(j.a)(h,2),y=(v[0],v[1],Object(c.useState)(!1)),k=Object(j.a)(y,2),S=k[0],I=k[1],N=Object(c.useContext)(w),D=Object(d.f)(),E=Object(c.useCallback)(Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.prev=1,e.next=4,n("".concat("/api","/posts/all"),"GET");case 4:t=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:a=t.reverse(),i(a),I(!1);case 12:case"end":return e.stop()}}),e,null,[[1,7]])}))),[n]);Object(c.useEffect)((function(){E()}),[E]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(x.a,{in:e.successAlert,children:Object(f.jsx)(p.a,{variant:"filled",severity:"success",children:"Your post has been submitted! All posts must go through our moderation team before being published."})}),Object(f.jsxs)(x.a,{in:!e.successAlert,children:[N.isLoggedIn&&"unverified"!=N.token&&Object(f.jsx)("div",{className:"center",children:Object(f.jsx)(O.a,{variant:"contained",size:"medium",onClick:function(){D("/create")},children:"Create Post"})}),"unverified"===N.token&&Object(f.jsx)(p.a,{severity:"info",variant:"filled",children:"Welcome to The Blog! Please ask Andrew to verify your account to start posting and commenting (email verification under construction)."})]}),"admin"===N.userType&&Object(f.jsx)("div",{className:"center",children:Object(f.jsx)(O.a,{variant:"contained",size:"medium",onClick:function(){D("/publish")},children:"Moderate Posts"})}),Object(f.jsx)(g,{text:"Vitae tortor condimentum lacinia quis vel eros donec ac. Duis at consectetur lorem donec massa. Sollicitudin ac orci phasellus egestas tellus rutrum tellus. Elit ut aliquam purus sit. Quisque egestas diam in arcu cursus euismod."}),S?Object(f.jsx)(m.a,{}):Object(f.jsx)(R,{posts:s})]})}),W=n(357),J=function(e){return Object(f.jsx)("div",{style:{margin:"50px"},children:Object(f.jsxs)(h.a,{className:"center-div",style:{padding:"30px"},elevation:2,children:[Object(f.jsxs)("div",{className:"post-header",children:[Object(f.jsx)("p",{style:{fontSize:"24px",fontWeight:"500",marginLeft:"20px",marginRight:"50px"},children:e.title}),Object(f.jsx)("p",{style:{fontSize:"14px",fontStyle:"italic"},children:e.author}),Object(f.jsx)("p",{style:{fontSize:"18px",float:"right",marginRight:"20px"},children:function(e){var t=e.substring(11,16),n=e.substring(0,4),a=e.substring(5,7),c=e.substring(8,10);return"".concat(t," ").concat(a,"/").concat(c,"/").concat(n)}(e.date)})]}),Object(f.jsx)("p",{style:{fontSize:"18px"},children:e.postBody})]})})},_=function(e){var t=C(),n=(t.isLoading,t.error,t.sendRequest),a=(t.clearError,Object(c.useContext)(w)),r=Object(c.useState)([]),s=Object(j.a)(r,2),i=s[0],o=s[1],d=Object(c.useState)(),b=Object(j.a)(d,2),x=b[0],p=b[1],h=Object(c.useState)(0),y=Object(j.a)(h,2),k=y[0],S=y[1],I=Object(c.useState)(e.numPendingPosts),N=Object(j.a)(I,2),D=N[0],E=N[1],T=Object(c.useState)(!1),F=Object(j.a)(T,2),L=F[0],A=F[1],q=Object(c.useState)(!0),B=Object(j.a)(q,2),z=B[0],R=B[1];Object(c.useEffect)((function(){var e;R(!0);var t=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("".concat("/api","/posts/pending/all"),"GET",null,{Authorization:"Bearer "+a.token});case 3:e=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("Fetch all posts: "+t.t0.message);case 9:return t.prev=9,console.log(e),0===e.length?(E(0),o([]),p()):(e.length!==D&&E(e.length),o(e),p(e[k])),R(!1),t.finish(9);case 14:case"end":return t.stop()}}),t,null,[[0,6,9,14]])})));return function(){return t.apply(this,arguments)}}();t()}),[L,a.token,k,D,n]);var P=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(!0),e.next=4,n("".concat("/api","/posts/publish/").concat(x.id),"PUT",null,{Authorization:"Bearer "+a.token,"Content-Type":"application/json"});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Approve post: "+e.t0.message);case 10:return e.prev=10,R(!1),A(!L),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,7,10,14]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(!0),e.next=4,n("".concat("/api","/posts/").concat(x.id),"DELETE",{creatorID:x.creatorID._id},{Authorization:"Bearer "+a.token});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Reject post: "+e.t0.message);case 10:return e.prev=10,R(!1),A(!L),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,7,10,14]])})));return function(){return e.apply(this,arguments)}}();return z?Object(f.jsx)("div",{className:"center-div",children:Object(f.jsx)(m.a,{})}):0===D?Object(f.jsx)(g,{text:"No posts to moderate."}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(g,{text:"You currently have ".concat(D," pending posts. When all posts have been evaluated, there may be more.")}),Object(f.jsx)(J,{title:i[k].title,postBody:Object(f.jsx)(v.a,{content:i[k].postBody}),date:i[k].createdAt,author:"".concat(i[k].creatorID.firstName," ").concat(i[k].creatorID.lastName)},i[k].id),Object(f.jsxs)("div",{className:"center",children:[Object(f.jsx)(O.a,{size:"large",onClick:P,children:"Approve"}),Object(f.jsx)(O.a,{size:"large",onClick:_,children:"Reject"})]}),Object(f.jsx)("div",{className:"center",children:Object(f.jsx)(W.a,{onChange:function(e,t){S(t-1)},count:D,size:"large",variant:"text"})})]})},G=n(370),M=n(371),U=n(372),V=n(369),Y=n(142),H=n(368),K=function(e){var t=Object(c.useContext)(w),n=Object(d.f)(),a=C(),r=(a.isLoading,a.error,a.sendRequest,a.clearError,Object(Y.a)({palette:{primary:{main:"#ffffff"}}})),s=Object(Y.a)({palette:{primary:{main:"#ffffff"}}});return Object(f.jsx)(G.a,{children:Object(f.jsxs)(M.a,{children:[Object(f.jsx)(U.a,{display:"flex",flexGrow:1,children:Object(f.jsx)(H.a,{theme:r,children:Object(f.jsx)(V.a,{style:{textDecoration:"none"},color:"primary",component:b.b,to:"/",variant:"h3",children:"blog.js"})})}),!t.isLoggedIn&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(H.a,{theme:r,children:Object(f.jsx)(O.a,{color:"primary",onClick:function(){n("/login")},children:"Login"})}),Object(f.jsx)(H.a,{theme:s,children:Object(f.jsx)(O.a,{color:"primary",onClick:function(){n("/register")},children:"Register"})})]}),t.isLoggedIn&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("p",{style:{marginRight:"30px"},children:["Hello, ",t.userFirstName]}),Object(f.jsx)(H.a,{theme:r,children:Object(f.jsx)(O.a,{color:"primary",onClick:t.logout,children:"Logout"})})]})]})})},Q=n(354),X=n(374),Z=n(359),$=n(375),ee=n(364),te=n(83),ne=n.n(te),ae=n(373),ce=Object(Y.a)(),re=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(j.a)(r,2),i=s[0],o=s[1],b=Object(c.useState)(!1),x=Object(j.a)(b,2),m=x[0],h=x[1],g=Object(c.useContext)(w),v=C(),k=(v.isLoading,v.error,v.sendRequest),I=(v.clearError,Object(d.f)()),N=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h(!1),a=!0,e.prev=3,e.next=6,k("".concat("/api","/users/login"),"POST",JSON.stringify({email:n,password:i}),{"Content-Type":"application/json"});case 6:c=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),a=!1,h(!0);case 13:a&&(g.login(c.userId,c.token,c.userName,c.userType,null),I("/"));case 14:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(H.a,{theme:ce,children:Object(f.jsxs)(ae.a,{className:"mainBody",component:"main",maxWidth:"xs",children:[Object(f.jsx)(Q.a,{}),Object(f.jsxs)(U.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(f.jsx)(y.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(f.jsx)(ne.a,{})}),Object(f.jsx)(V.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(f.jsxs)(U.a,{component:"form",onSubmit:N,noValidate:!0,sx:{mt:1},children:[Object(f.jsx)(S.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){a(e.target.value)}}),Object(f.jsx)(S.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){o(e.target.value)}}),Object(f.jsx)(X.a,{control:Object(f.jsx)(Z.a,{value:"remember",color:"primary"}),label:"Remember me"}),m&&Object(f.jsx)(ee.a,{item:!0,xs:12,children:Object(f.jsx)(p.a,{severity:"error",children:"Could not find a user with those credentials."})}),Object(f.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(f.jsxs)(ee.a,{container:!0,children:[Object(f.jsx)(ee.a,{item:!0,xs:!0,children:Object(f.jsx)($.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(f.jsx)(ee.a,{item:!0,children:Object(f.jsx)($.a,{href:"../register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})]})})},se=Object(Y.a)(),ie=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(j.a)(r,2),i=s[0],o=s[1],b=Object(c.useState)(""),x=Object(j.a)(b,2),m=x[0],h=x[1],g=Object(c.useState)(""),v=Object(j.a)(g,2),k=v[0],I=v[1],N=Object(c.useContext)(w),D=C(),E=(D.isLoading,D.error,D.sendRequest),T=(D.clearError,Object(d.f)()),F=Object(c.useState)(!1),L=Object(j.a)(F,2),A=L[0],q=L[1],B=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),new FormData(t.currentTarget),e.prev=2,e.next=5,E("".concat("/api","/users/register"),"POST",JSON.stringify({firstName:n,lastName:i,email:m,password:k}),{"Content-Type":"application/json"});case 5:if(a=e.sent,console.log(a),!a.message){e.next=11;break}if("email address already in use"!==a.message){e.next=11;break}return q(!0),e.abrupt("return");case 11:return e.next=13,E("".concat("/api","/users/login"),"POST",JSON.stringify({email:m,password:k}),{"Content-Type":"application/json"});case 13:c=e.sent,N.login(c.userId,c.token,c.userName,c.userType),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(2);case 19:T("/");case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(H.a,{theme:se,children:Object(f.jsxs)(ae.a,{component:"main",maxWidth:"xs",children:[Object(f.jsx)(Q.a,{}),Object(f.jsxs)(U.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(f.jsx)(y.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(f.jsx)(ne.a,{})}),Object(f.jsx)(V.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(f.jsxs)(U.a,{component:"form",noValidate:!0,onSubmit:B,sx:{mt:3},children:[Object(f.jsxs)(ee.a,{container:!0,spacing:2,children:[Object(f.jsx)(ee.a,{item:!0,xs:12,sm:6,children:Object(f.jsx)(S.a,{autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:n,onChange:function(e){a(e.target.value)}})}),Object(f.jsx)(ee.a,{item:!0,xs:12,sm:6,children:Object(f.jsx)(S.a,{required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name",value:i,onChange:function(e){o(e.target.value)}})}),Object(f.jsx)(ee.a,{item:!0,xs:12,children:Object(f.jsx)(S.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:m,onChange:function(e){h(e.target.value)}})}),Object(f.jsx)(ee.a,{item:!0,xs:12,children:Object(f.jsx)(S.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:k,onChange:function(e){I(e.target.value)}})}),A&&Object(f.jsx)(ee.a,{item:!0,xs:12,children:Object(f.jsx)(p.a,{severity:"error",children:"Email address already in use."})})]}),Object(f.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(f.jsx)(ee.a,{container:!0,justifyContent:"flex-end",children:Object(f.jsx)(ee.a,{item:!0,children:Object(f.jsx)($.a,{href:"/login",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})})},oe=function(){var e=Object(d.g)().id,t=C().sendRequest,n=Object(c.useContext)(w),a=Object(c.useState)(!0),r=Object(j.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(),b=Object(j.a)(o,2),x=b[0],p=b[1],O=Object(c.useCallback)(Object(u.a)(l.a.mark((function a(){var c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i(!0),a.prev=1,a.next=4,t("".concat("/api","/users/id/").concat(e),"GET",null,{Authorization:"Bearer "+n.token});case 4:c=a.sent,a.next=9;break;case 7:a.prev=7,a.t0=a.catch(1);case 9:p(c),console.log(c),i(!1);case 12:case"end":return a.stop()}}),a,null,[[1,7]])}))),[n.token,e,t]);return Object(c.useEffect)((function(){O()}),[O]),Object(f.jsx)(f.Fragment,{children:s?Object(f.jsx)(m.a,{}):Object(f.jsx)(g,{text:"This is "+x.firstName+" "+x.lastName+"'s profile"})})},le=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(g,{text:"You do not have permission to access this page."})})},ue=n(141),je=n.n(ue),de=(n(292),Object(c.createContext)({setAlert:function(){}})),be=(n(293),function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),o=i[0],b=i[1],x=C(),p=(x.isLoading,x.error,x.sendRequest),m=(x.clearError,Object(d.f)()),h=Object(c.useContext)(w),v=Object(c.useContext)(de),y=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p("".concat("/api","/posts/create"),"POST",JSON.stringify({title:""===o?"Test Post":o,postBody:""===a?"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.":a,creatorID:h.userId}),{Authorization:"Bearer "+h.token,"Content-Type":"application/json"});case 4:e.sent,console.log("if this runs why doesn't navigate?"),v.setAlert(),m("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Create post error: "+e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(g,{text:""}),Object(f.jsxs)("form",{onSubmit:y,children:[Object(f.jsx)("div",{style:{backgroundColor:"white"},children:Object(f.jsx)(S.a,{autoFocus:!0,type:"text",style:{display:"flex",marginBottom:"1rem"},id:"outlined-basic",variant:"outlined",placeholder:"Post title...",value:o,onChange:function(e){b(e.target.value)}})}),Object(f.jsx)("div",{style:{backgroundColor:"white"},children:Object(f.jsx)(je.a,{theme:"snow",placeholder:"Start creating your masterpiece...",value:a,onChange:function(e){r(e)}})}),Object(f.jsx)("div",{className:"center-div-btn",children:Object(f.jsx)(O.a,{type:"submit",variant:"contained",size:"large",children:"Submit Post"})})]})]})}),xe=n(65),pe=function(){var e=C().sendRequest,t=Object(c.useState)(!1),n=Object(j.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(),i=Object(j.a)(s,2),o=i[0],x=i[1],p=Object(c.useState)(),O=Object(j.a)(p,2),m=O[0],h=O[1],g=Object(c.useState)(),v=Object(j.a)(g,2),y=v[0],k=v[1],S=Object(c.useState)(),I=Object(j.a)(S,2),N=I[0],D=I[1],E=Object(c.useState)(!1),T=Object(j.a)(E,2),F=T[0],L=T[1],q=Object(c.useState)(!1),B=Object(j.a)(q,2),z=B[0],R=B[1],W=Object(c.useCallback)((function(e,t,n,a,c){R("unverified"!==t),r(t),x(e),k(n),h(a);var s=c||new Date((new Date).getTime()+36e5);D(s),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:s.toISOString()}))}),[]),J=Object(c.useCallback)((function(){r(null),x(null),D(null),k(null),h(null),R(!1),localStorage.removeItem("userData")}),[]);Object(c.useEffect)((function(){if(a&&N){var e=new Date,t=N.getTime()-e.getTime();A=setTimeout(J,t)}else clearTimeout(A)}),[a,J,N]);var G=Object(c.useCallback)(function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e("".concat("/api","/users/").concat(n),"GET");case 3:a=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:k(a.firstName),h(a.userType);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),[e]);Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&G(e.userId),e&&e.token&&new Date(e.expiration)>new Date&&W(e.userId,e.token,y,m,new Date(e.expiration))}),[W,G,y,m]);var M,U=Object(c.useCallback)((function(){L(!0),setTimeout((function(){L(!1)}),5e3)}),[]);return M="unverified"!==a&&"admin"===m?Object(f.jsx)(c.Fragment,{children:Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{exact:!0,path:"/users/:id",element:Object(f.jsx)(oe,{})}),Object(f.jsx)(d.a,{path:"/",element:Object(f.jsx)(P,{successAlert:F}),exact:!0}),Object(f.jsx)(d.a,{path:"/create",element:Object(f.jsx)(be,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/login",element:Object(f.jsx)(P,{successAlert:F}),exact:!0}),Object(f.jsx)(d.a,{path:"/publish",element:Object(f.jsx)(_,{}),exact:!0})]})}):"unverified"!==a&&z?Object(f.jsx)(c.Fragment,{children:Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{path:"/users/:id",element:Object(f.jsx)(oe,{})}),Object(f.jsx)(d.a,{path:"/",element:Object(f.jsx)(P,{successAlert:F}),exact:!0}),Object(f.jsx)(d.a,{path:"/create",element:Object(f.jsx)(be,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/login",element:Object(f.jsx)(P,{successAlert:F}),exact:!0}),Object(f.jsx)(d.a,{path:"/publish",element:Object(f.jsx)(le,{}),exact:!0})]})}):Object(f.jsx)(c.Fragment,{children:Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{exact:!0,path:"/users/:id",element:"unverified"===a?Object(f.jsx)(oe,{}):Object(f.jsx)(le,{})}),Object(f.jsx)(d.a,{path:"/",element:Object(f.jsx)(P,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/create",element:Object(f.jsx)(le,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/login",element:Object(f.jsx)(re,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/register",element:Object(f.jsx)(ie,{}),exact:!0}),Object(f.jsx)(d.a,{path:"/publish",element:Object(f.jsx)(le,{}),exact:!0})]})}),Object(f.jsx)(de.Provider,{value:{setAlert:U},children:Object(f.jsx)(w.Provider,{value:{userId:o,userFirstName:y,userType:m,isLoggedIn:!!a,token:a,login:W,logout:J},children:Object(f.jsxs)(b.a,{children:[Object(f.jsx)(K,{}),Object(f.jsx)("div",{className:"main",children:M})]})})})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,382)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},me={position:xe.b.TOP_CENTER,timeout:8e3,offset:"0px",transition:xe.c.FADE,type:"success"},he={backgroundColor:"#FFFFFF",color:"black",padding:"20px",borderRadius:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0px 2px 2px 2px rgba(0, 0, 0, 0.03)",fontFamily:"Arial",width:"350px",boxSizing:"border-box"};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(xe.a,Object(a.a)(Object(a.a)({template:function(e){var t=e.message,n=(e.options,e.style);e.close;return Object(f.jsx)("div",{style:Object(a.a)(Object(a.a)({},he),n),children:Object(f.jsx)("span",{style:{flex:2},children:t})})}},me),{},{children:Object(f.jsx)(pe,{onClick:function(e){e.remove(e)}})}))}),document.getElementById("root")),Oe()}},[[295,1,2]]]);
//# sourceMappingURL=main.ac8152fa.chunk.js.map